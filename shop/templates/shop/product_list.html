{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞</title>
    <link rel="stylesheet" href="{% static 'shop/style.css' %}" />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet" />
</head>
<body>
    <div class="wrapper">

        {% block title %}
            <a href="{% url 'product_list' %}" class="logo">MERCH</a>
        {% endblock %}

        <div class="cart-link">
            <a href="{% url 'cart_detail' %}" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É">
                <span class="cart-icon" aria-hidden="true">üõí</span>
                <span class="cart-text">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É</span>
            </a>
        </div>

        <h1>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h1>

        <div class="filter-buttons">
            {% for cat in categories %}
                <a href="?category={{ cat.id }}" class="{% if cat.id == selected_category %}active{% endif %}">
                    {{ cat.name }}
                </a>
            {% endfor %}
        </div>

        {% if products %}
            <ul class="horizontal-list">
                {% for product in products %}
                    <li class="product-card">
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" />
                        <h3>{{ product.name }}</h3>
                        <p class="price">{{ product.price }} $</p>

                        <button class="toggle-info" type="button">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>

                        <div class="product-details">
                            <p><strong>–†–∞–∑–º–µ—Ä—ã:</strong> {{ product.sizes }}</p>
                            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ product.description }}</p>
                            <p><strong>–û—Ç–∑—ã–≤—ã:</strong> ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</p>

                            <a href="{% url 'add_to_cart' product.id %}" class="add-btn">–í –∫–æ—Ä–∑–∏–Ω—É</a>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.</p>
        {% endif %}

    </div>

    <footer>
        <p>&copy; {{ year }} –ú–æ–π —Å–∞–π—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.toggle-info').forEach(button => {
                button.addEventListener('click', () => {
                    const card = button.closest('.product-card');
                    card.classList.toggle('open');
                    button.textContent = card.classList.contains('open') ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ';
                });
            });
        });
    </script>
</body>
</html>
